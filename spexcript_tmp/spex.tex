
\documentclass[a5paper,11pts]{article}
\frenchspacing
\usepackage[finnish]{babel}

\makeatletter
\newcommand{\needspace}[1]{%
 { \begingroup
    \setlength{\dimen@}{#1}%
    \vskip\z@\@plus\dimen@
    \penalty -100\vskip\z@\@plus -\dimen@
    \vskip\dimen@
    \penalty 9999%
    \vskip -\dimen@
    \vskip\z@skip % hide the previous |\vskip| from |\addvspace|
  \endgroup}
}
\makeatother

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{soulutf8}

\usepackage[usenames]{color}
\usepackage{soul}
\usepackage{wasysym}


\addtolength\columnsep{0.5cm}
\usepackage[portrait, left=1.4cm, top=1.5cm, right=1.4cm, nohead]{geometry}

\setlength\fboxrule{0.4pt} % box line width

\newcommand{\scripttitle}[1]{
    %\twocolumn
    \newpage
    {{\noindent { \texttt{\Huge #1}}}\vspace{3.5cm}\phantom{joo} \\ }
    \newpage
}

\newcommand{\hugetitle}[1]{\newpage
    \noindent \texttt{\Huge #1} \vspace{1.2cm}\phantom{joo} \\
}

\newcommand{\character}[2]{

    \noindent \texttt{#1}
    
    \setlength{\leftskip}{8mm}\nopagebreak
    \noindent #2
    
    \setlength{\leftskip}{0mm}

    \vspace{1mm}
    
}

\newcommand{\intermission}[1]{\vspace{\fill}\vspace{5mm}\begin{center}\texttt{\LARGE #1}
\end{center}\vspace{4mm}\vspace{\fill}}


\newcommand{\actlisting}[1]{
    \vspace{1.5mm}
    \noindent
    \begin{tabular}{@{}l@{}}%\hline\hline
    \begin{minipage}{\columnwidth}\vspace{1mm}
    \LARGE \bf \texttt{#1}\hfill
    \end{minipage}\\\hline\nopagebreak %\\hline
    \end{tabular}}

\newcommand{\acttitle}[1]{

    \newpage\noindent
    \begin{tabular}{@{}l@{}}\hline\hline
    \begin{minipage}{\columnwidth}\vspace{1mm}
    \LARGE \bf \texttt{#1}\hfill
    \end{minipage}\\\hline\hline
    \end{tabular}\nopagebreak}


\newcommand{\scenetitle}[3]{

    \vspace{0.4cm}
    \pagebreak[3]\begin{center}\needspace{3cm}\pagebreak[3]\fbox{\begin{minipage}{.87\columnwidth}
    {\Large \bf \texttt{#1}}
    #2
    
    \begingroup {\raggedleft\texttt{\small (#3)}\\*}\endgroup
    \end{minipage}}\nopagebreak\end{center}\nopagebreak}

\newcommand{\scenelisting}[3]{%
    \begin{center}\begin{minipage}{\columnwidth}
    {\Large \bf \texttt{#1}}
    #2
    
    \begingroup{\raggedleft\texttt{\small (#3)}\par}\endgroup
    \end{minipage}\end{center}
    
}


\newcommand{\anonymousblock}[1]{%
    \noindent
    \begin{minipage}[t]{1\columnwidth}\it
    #1
    %if(bufi >= bufsize)
    %\qed
    \end{minipage}\vspace{1.6mm}\par

}

\newcommand{\anonymousblockbox}[1]{%
    \setlength\fboxrule{2pt}
    \noindent
    \fbox{\begin{minipage}[t]{1\columnwidth}\it
    #1
    %if(bufi >= bufsize)
    %\qed
    \end{minipage}}\vspace{1.6mm}\par
    \setlength\fboxrule{0.4pt} % set line width back to initial for the following boxes
}

\newcommand{\namedblock}[2]{%
    \noindent
    \begin{minipage}[t]{.22\columnwidth}\flushleft\noindent\textbf{#1\vfill}\end{minipage}
    \begin{minipage}[t]{.78\columnwidth} #2
    %if(bufi >= bufsize)
    %\qed
    \end{minipage}\vspace{1.3mm}\par
    
}

\newcommand{\musicblock}[2]{%
    \noindent
    \begin{minipage}[t]{.22\columnwidth}\flushright\noindent\textbf{#1\vfill}\end{minipage}
    \begin{minipage}[t]{.78\columnwidth} #2
    %if(bufi >= bufsize)
    %\qed
    \end{minipage}\vspace{1.3mm}\par

}

\flushbottom
\widowpenalty=1000
\clubpenalty=1000

\begin{document}

        \begin{titlepage}
            \vspace*{\fill}
            \begin{center}
                \vspace*{1cm}
                {\Huge \tt {Käsikirjoitus}\hspace*{5cm}\phantom{.}}\\
                \vspace{.3cm}
                \begin{tabular}{r|l}
                \Large Otsikko &{\Large \tt Mallispeksi}\\
                \vspace{0.4cm}
                Päiväys &{\tt \today}\\
                \end{tabular}
                \vspace{1.5cm}
                
                \hspace*{2cm}Tämän kappaleen omistaja:  
                \underline{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\\

            \end{center}
            \vspace*{\fill}
            \flushright
                \small $spe\chi cript\,0.3\,beta$: hyvä -- ei kämäinen.\\
                \tiny Oli $spex\tau\epsilon\chi\,2\,beta$!
        \end{titlepage}
        \hugetitle{Henkilöt}\character{Hahmo (Hahmo, jonka lyhenne on H)}{}\character{Toinen (Toinen hahmo, jonka lyhenne on T)}{}\hugetitle{Kohtausluettelo}\actlisting{1. Näytös -- Näytöksen nimi}\scenelisting{Kohtaus 1.1: Kohtauksen nimi}{\\Kohtauksen alkuun kirjoitetaan, mitä kohtauksessa tapahtuu. Tämä näkyy kohtausluettelossa. 
}{Hahmo, Toinen, Nimetön}\scenelisting{Kohtaus 1.2: Puhelinkohtaus}{\\Tässä kohtauksessa tapahtuu myös asioita. 
}{\eighthnote , Hahmo, Toinen, \twonotes }\intermission{VÄLIAIKA}\actlisting{2. Näytös -- Toinen näytös}\scenelisting{Kohtaus 2.1: Jännittävä kohtaus}{\\Kohtauksessa tapahtuu jotain jännittävää. 
}{Hahmo, Toinen}\scripttitle{Käsikirjoitus}\acttitle{1. Näytös -- Näytöksen nimi}\scenetitle{Kohtaus 1.1: Kohtauksen nimi}{}{Hahmo, Toinen, Nimetön}\anonymousblock{Näyttämöohje, joka kertoo että @Hahmo ja @Toinen tekevät jotain. 
}\namedblock{Hahmo:}{Moi @Toinen! 
}\namedblock{Toinen:}{No terveppä terve @Hahmo! 
}\namedblock{Nimetön:}{Minullekin voi kirjottaa repliikin, vaikka en ole hahmo. 
}\scenetitle{Kohtaus 1.2: Puhelinkohtaus}{}{\eighthnote , Hahmo, Toinen, \twonotes }\anonymousblock{@Toinen ja @Hahmo ovat puhelimen vieressä. 
}\musicblock{\eighthnote \hfill $\;\;$}{Puhelin soi 
}\namedblock{Hahmo:}{Vastaa sinä. Se on varmasti äiti. 
}\namedblock{Toinen:}{En vastaa. Vastaa sinä. 
}\musicblock{\twonotes \hfill $\;\;$}{@Hahmo ja @Toinen laulavat puhelimeenvastaamisbiisin. 
}\intermission{VÄLIAIKA}\acttitle{2. Näytös -- Toinen näytös}\scenetitle{Kohtaus 2.1: Jännittävä kohtaus}{}{Hahmo, Toinen}\anonymousblock{@Hahmo singanhtaa ulos piilopaikastaan. 
}\anonymousblock{@Toinen esittää säikähtänyttä (dramaattisesti) ja menee ulos 
}\namedblock{Hahmo:}{(pelottavasti) Pöö! 
}\namedblock{Toinen:}{Hui. 
}
\end{document}

